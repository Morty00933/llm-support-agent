# =============================================================================
# LLM Support Agent - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment
#
# SECURITY WARNING: Never commit .env to version control!
# Generate secrets with: openssl rand -hex 32

# =============================================================================
# APPLICATION
# =============================================================================
ENV=dev                                    # dev, test, prod
APP_NAME=llm-support-agent
APP_VERSION=1.0.0
DEBUG=true                                 # Set to false in production!
HOST=0.0.0.0
PORT=8000
WORKERS=2                                  # Uvicorn workers (production: 4-8)

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================
# Comma-separated list of allowed origins
# Development: include localhost and dev ports
# Production: use actual domain(s)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173

# =============================================================================
# DATABASE (PostgreSQL with pgvector)
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres                       # CHANGE IN PRODUCTION!
DB_NAME=llm_agent
DB_POOL_SIZE=10                           # Connection pool size
DB_MAX_OVERFLOW=20                        # Max extra connections
DB_POOL_TIMEOUT=30                        # Seconds to wait for connection
DB_POOL_RECYCLE=1800                      # Recycle connections after 30min
DB_ECHO=false                             # Log all SQL queries (debug only)

# =============================================================================
# REDIS (Cache & Message Broker)
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
# Leave empty for dev, set strong password in production
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SSL=false

# =============================================================================
# JWT (Authentication)
# =============================================================================
# CRITICAL: Generate a strong secret!
# Command: openssl rand -hex 32
JWT_SECRET=GENERATE_WITH_openssl_rand_hex_32_BEFORE_PRODUCTION
JWT_ALG=HS256
JWT_EXPIRE_MIN=60                         # Access token lifetime (minutes)
JWT_REFRESH_EXPIRE_DAYS=7                 # Refresh token lifetime (days)
JWT_AUDIENCE=llm-support-agent
JWT_ISSUER=llm-support-agent

# =============================================================================
# OLLAMA (LLM Server)
# =============================================================================
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL_CHAT=qwen2.5:3b             # Chat model
OLLAMA_MODEL_EMBED=nomic-embed-text       # Embedding model
OLLAMA_TIMEOUT=120                        # Request timeout (seconds)
OLLAMA_TEMPERATURE=0.2                    # Response creativity (0.0-1.0)
EMBEDDING_DIM=768                         # Embedding vector dimension

# =============================================================================
# CELERY (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_TIMEOUT_SECONDS=300
CELERY_TASK_ALWAYS_EAGER=false            # Set to true for synchronous testing
CELERY_TASK_IGNORE_RESULT=false
CELERY_TASK_RETRY_BACKOFF_MIN=60
CELERY_TASK_MAX_RETRIES=3
CELERY_TASK_RETRY_BACKOFF_MAX=600

# =============================================================================
# INTEGRATIONS
# =============================================================================

# --- Jira ---
JIRA_ENABLED=false
JIRA_BASE_URL=
JIRA_EMAIL=
JIRA_API_TOKEN=
JIRA_PROJECT_KEY=
JIRA_ISSUE_TYPE=Task

# --- Zendesk ---
ZENDESK_ENABLED=false
ZENDESK_SUBDOMAIN=
ZENDESK_EMAIL=
ZENDESK_API_TOKEN=

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=INFO                            # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json                           # json or text

# Sentry (Error Tracking)
SENTRY_DSN=                               # https://your-sentry-dsn

# Prometheus (Metrics)
PROMETHEUS_ENABLED=true

# =============================================================================
# FEATURES
# =============================================================================
FEATURE_DARK_MODE=true

# Demo Mode (for testing/demonstrations)
DEMO_MODE_ENABLED=false
DEMO_SEED_ON_STARTUP=false

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# When ENV=prod, ensure you set:
# - Strong JWT_SECRET (32+ random characters)
# - Strong DB_PASSWORD
# - Strong REDIS_PASSWORD (if exposed)
# - CORS_ORIGINS to actual production domains only
# - DEBUG=false
# - LOG_LEVEL=WARNING or ERROR
# - SENTRY_DSN for error tracking
